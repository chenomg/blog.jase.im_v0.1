{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load blog_template_tags %}
{% block body_block %}
    {% if posts %}
    <!--Blog posts-->
        {% for post in posts %}
        <div class="card mb-4">
            <div class="card-body">
                <h2 class="card-title">
                    <a href="{% url 'blog:post_detail' post.slug  %}" >{{ post.title }}</a>
                </h2>
                <p class="card-text">{{ post.excerpt|safe }}</p>
                <a href="{% url 'blog:post_detail' post.slug  %}" class="btn btn-info">Read More &rarr;</a>
            </div>
            <div class="card-footer text-muted">
                Posted on <time>{{ post.created_time|date:'M d, Y' }}</time>&nbsp by <a href="{% url 'blog:user_show' user.username %}">{{ post.author }}</a>
                <span>&nbsp- views:{{ post.views }}</span>
            </div>
        </div>

        <hr>

        {% endfor %}
        <div id='page_indicator'>
            {% if page_previous %}
                {% if query %}
                <a id='page-pre' class='btn' href="{% url 'blog:index' %}?query={{ query }}&page={{page_previous_id}}">上一页</a>
                {% else %}
                <a id='page-pre' class='btn' href="{% url 'blog:index' %}?page={{page_previous_id}}">上一页</a>
                {% endif %}
            {% endif %}
                 <span>第{{ page_current }}页</span>
            {% if page_next %}
                {% if query %}
                <a id='page-next' class='btn' href="{% url 'blog:index' %}?query={{ query }}&page={{page_next_id}}">下一页</a>
                {% else %}
                <a id='page-next' class='btn' href="{% url 'blog:index' %}?page={{page_next_id}}">下一页</a>
                {% endif %}
            {% endif %}
        </div>
    {% else %}
        <strong>都好懒, 还木有发表文章</strong>
    {% endif %}

{% endblock %}
{% block tag %}
    {% show_current_tags %}
{% endblock %}
{% block category %}
    {% show_current_categories %}
{% endblock %}
